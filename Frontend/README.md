# Frontend - Website

The website will fetch allow the user to view/download the files that have been saved to the AWS S3 bucket by the server.

## Getting Started

This README file will only tell instructions for the frontend service.

### 1. Fork the Repo

We will be using [Vercel](https://vercel.com/docs) to host the frontend website. The service is free to use and comes with many benefits.

In order to host using Vercel, you will need to fork this repo first and start a new project on Vercel. More about forking the repo [here.](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/working-with-forks/fork-a-repo) 

### 2. LINE Login Channel Creation

&emsp; 1. Navigate to the [LINE developer console](https://account.line.biz/login?redirectUri=https%3A%2F%2Fdevelopers.line.biz%2Fconsole%2F) and login using LINE.

&emsp; 2. Create a new Provider if you don't already have one.

&emsp; 3. Create a new Channel under the selected Provider and select LINE Login for the channel type.

&emsp; 4. Once created, select the `LINE Login` tab and enable LINE Login with Webapp. Set the callback url to

Note: If hosting on Vercel, come back once the project is deployed. Vercel will automatically provide a new domain for the project.

```json
https://<your-domain>/api/auth/callback/line
```

&emsp; 5. Under the `Basic Settings` tab, copy the `Channel ID` and `Channel Secret` as we'll need it later.

### 3. Vercel Deployment

There are a couple of settings we need to change on the Vercel deployment page before we actually deploy the website.

&emsp; 1. Change the root directory to `Frontend`. By default, the `./` directory is selected.

&emsp; 2. Set the following environment variables:

```json
NEXT_PUBLIC_LINE_AUTH_URL=https://access.line.me/oauth2/v2.1/authorize
NEXT_PUBLIC_LINE_CLIENT_ID=
LINE_TOKEN_REDIRECT_URI=https://<your-frontend-domain>/api/auth/callback/line
NEXT_PUBLIC_LINE_RESPONSE_TYPE=code
NEXT_PUBLIC_LINE_SCOPE='profile openid'

LINE_TOKEN_GRANT_TYPE=authorization_code
LINE_TOKEN_REDIRECT_URI=https://<your-frontend-domain>/api/auth/callback/line
LINE_TOKEN_CLIENT_ID=
LINE_TOKEN_CLIENT_SECRET=

LINE_TOKEN_AUTH_URL=https://api.line.me/oauth2/v2.1/token
LINE_VERIFY_TOKEN_AUTH_URL=https://api.line.me/oauth2/v2.1/verify

LINE_FETCH_PROFILE_URL=https://api.line.me/oauth2/v2.1/userinfo

ENCRYPT_SECRET_KEY=

FETCH_IMAGES=https://<your-backend-domain>/s3_bucket/fetch/image/
FETCH_VIDEOS=https://<your-backend-domain>/s3_bucket/fetch/video/
FETCH_AUDIOS=https://<your-backend-domain>/s3_bucket/fetch/audio/
FETCH_FILES=https://<your-backend-domain>/s3_bucket/fetch/file/
```

`NEXT_PUBLIC_LINE_CLIENT_ID` & `LINE_TOKEN_CLIENT_ID`: The client ID value taken from the previous step
`LINE_TOKEN_CLIENT_SECRET`: The client secret value from the previous step

`ENCRYPT_SECRET_KEY`: This is a random string generated by you

Note: You can always deploy the website first, then add more environment variables once the deployment is complete.
